<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <title>vs. Raphael (Complex Shape) | Fabric.js Benchmarks</title>

    <link rel="stylesheet" href="../css/master.css">

    <script src="../lib/fabric.js"></script>
    <!--[if lt IE 9]>
      <script src="../lib/excanvas.js"></script>
    <![endif]-->
    <script src="../js/master.js"></script>

  </head>
  <body>
    <ul id="header">
  <li><a href="/">Home</a></li>
  <li><a href="/demos">Demos</a></li>
  <li><a href="/articles">Tutorial</a></li>
  <li><a href="/docs">Docs</a></li>
  <li><a href="/build">Custom Build</a></li>
  <li><a href="/help">Support</a></li>
  <li><a href="/test">Tests/Benchmarks</a></li>
  <li><a href="/team">Team</a></li>
  <li class="github secondary">
    <a class="github-button" href="https://github.com/fabricjs/fabric.js" data-size="large" data-show-count="true" aria-label="Star fabricjs/fabric.js on GitHub">Star</a>
  </li>
  <li class="twitter secondary">
    <a href="https://twitter.com/fabricjs" class="twitter-follow-button" data-show-count="true">Follow @fabricjs</a>
  </li>
</ul>
<script async defer src="https://buttons.github.io/buttons.js"></script>
<script>
(function() {
  if (document.location.hostname !== 'localhost') {
    !function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0];if(!d.getElementById(id)){js=d.createElement(s);js.id=id;js.src="//platform.twitter.com/widgets.js";fjs.parentNode.insertBefore(js,fjs);}}(document,"script","twitter-wjs");
  }
})();
</script>


    <div id="bd-wrapper">
      <h2><span>Fabric.js benchmarks</span> &middot; vs. Raphael (Complex Shape)</h2>

      <style>
  svg {
    border: 1px solid #000;
  }
  .canvas_container {
    display: block;
  }
</style>
<script src="https://cdn.jsdelivr.net/gh/DmitryBaranovskiy/raphael@latest/raphael.min.js"></script>
<script src="../lib/tiger.js"></script>
<script>
  (function() {
    fabric.Object.prototype.transparentCorners = true;
    window.onload = function() {

      var logEl = document.getElementById('log');

      (function testFabric() {

        var canvas = this.__canvas = new fabric.Canvas('canvas', {
          renderOnAddRemove: false,
          stateful: false,
          preserveObjectStacking: true
        });

        //console.profile('parsing');
        var startTime2 = new Date();
        fabric.loadSVGFromURL('../lib/tiger2.svg', function(objects) {

          //console.profileEnd('parsing');

          var startTime = new Date();

          var group = new fabric.Group(objects, {
            left: 65,
            top: 100,
            width: 495,
            height: 511,
            subTargetCheck: true,
            interactive: true,
            transparentCorners: false
          });
          var loadTime = new Date() - startTime2;
          canvas.add(group);
          canvas.renderAll();
          canvas.on('selection:created', opt => {
            opt.selected.forEach(obj => obj !== group && obj.set({ opacity: 0.5 }));
          });
          canvas.on('selection:updated', opt => {
            opt.selected.forEach(obj => obj !== group && obj.set({ opacity: 0.5 }));
            opt.deselected.forEach(obj => obj !== group && obj.set({ opacity: 1 }));
          });
          canvas.on('selection:cleared', opt => {
            opt.deselected.forEach(obj => obj !== group && obj.set({ opacity: 1 }));
          });

          var renderingTime = new Date() - startTime;

          logEl.innerHTML += 'fabric: <b class="bench">' + (loadTime + renderingTime) +
            '</b> ms (parsing: ' + loadTime + ',first rendering: ' + renderingTime + ')';

          document.getElementById('description').appendChild(document.createTextNode(' (' + group.complexity() + ' paths)'))
        });

        canvas.calcOffset();

      })();

      (function testRaphael() {

        var start = function () {
          // storing original coordinates
          this.ox = this.attr("cx");
          this.oy = this.attr("cy");
          this.attr({opacity: .5});
        },
        move = function (dx, dy) {
          // move will be called with dx and dy
          this.attr({cx: this.ox + dx, cy: this.oy + dy});
        },
        up = function () {
          // restoring state
          this.attr({opacity: 1});
        };

        var startTime = new Date();
        var shape = Raphael(tiger).translate(200, 200);
        shape.drag(start, move, up);

        logEl.innerHTML = 'Raphael: <b class="bench">' + (new Date() - startTime) + '</b> ms<br>';

      })();
    };
  })();
</script>

<!-- preload svg -->
<iframe src="../lib/tiger2.svg" style="position:absolute;top:-999px;left:-999px"></iframe>
<p id="description">Rendering a complex shape</p>
<canvas id="canvas" width="600" height="600"></canvas>
<p id="log"></p>

    </div>
  </body>
</html>
